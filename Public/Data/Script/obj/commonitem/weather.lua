--×¢Òâ: 

--ÎïÆ·¼¼ÄÜtoÕ ğµ Âß¼­Ö»ÄÜÊ¹ÓÃ»ù´¡¼¼ÄÜºÍ½Å±¾À´ÊµÏÖ

--½Å±¾:

--½Å±¾ºÅ
x331026_g_scriptId = 331026 --ÁÙÊ±Ğ´Cái này ,ÕæÕıÓÃtoÕ ğµ Ê±ºòmµt ¶¨Òª¸Ä.

-- effect = Client/Config/EffectDefine.txtÖĞ¶¨ÒåtoÕ ğµ 
-- time = ³ÖĞøÊ±¼ä( giây)

x331026_g_itemList = {}
x331026_g_itemList[30509029] = {effect=2, time=60,
	msg1="#W#{_INFOUSR%s}#c00FFFF th¤y ğã lâu không mßa, cây c¯i ruµng ğ¤t khô c¢n, không ğành lòng nên ğã l¤y 1 %s#c00FFFF, mi®ng l¦m b¦m, 1 lúc sau chï th¤y mây ğen ğen kéo ğ¥y tr¶i, mßa gió bão bùng.",
	msg2="#W#{_INFOUSR%s}#c00FFFF th¤y ·#G%s#c00FFFF ğã lâu không mßa, cây c¯i ruµng ğ¤t khô c¢n, không ğành lòng nên ğã l¤y 1 %s#c00FFFF, mi®ng l¦m b¦m, 1 lúc sau chï th¤y mây ğen ğen kéo ğ¥y tr¶i, mßa gió bão bùng."}
x331026_g_itemList[30509030] = {effect=3, time=60,
	msg1="#W#{_INFOUSR%s}#c00FFFF Ğang ğÑng tÕi ngß¶i yêu cüa mình l§p l¶i th«, nªu nhß có phø lòng sau này s¨ b¸ tr¶i ğánh. V×a nói dÑt câu, không ng¶ mây ğen kéo ğªn, s¤m ch¾p ¥m ¥m. Lúc ğó hù ğªn nét m£t ğ¥y v¨ kinh sş. Sau này phát hi®n Không ng¶ là do %s#c00FFFF làm ra.",
	msg2="#W#{_INFOUSR%s}#c00FFFF Ğang ğÑng tÕi ngß¶i yêu cüa mình l§p l¶i th«, nªu nhß có phø lòng sau này s¨ b¸ tr¶i ğánh. V×a nói dÑt câu, #G%s#c00FFFF không ng¶ mây ğen kéo ğªn, s¤m ch¾p ¥m ¥m. Lúc ğó hù ğªn nét m£t ğ¥y v¨ kinh sş. Sau này phát hi®n Không ng¶ là do %s#c00FFFF làm ra."}
x331026_g_itemList[30509031] = {effect=4, time=60,
	msg1="#W#{_INFOUSR%s}#c00FFFF b¸ 1 ğám ti¬u tØ qu¤y r¥y liên tøc và không còn bi®n pháp nào khác, chï còn l¤y bäo v§t %s#c00FFFF ğã c¤t gi¤u lâu nay, gào lên 1 tiªng \"Oan!\", trên tr¶i b±ng xu¤t hi®n 1 lu°ng tuyªt Nga mao r¾t xu¯ng, lû ti¬u tØ kinh sş quá bö chÕy.",
	msg2="#W#{_INFOUSR%s}#c00FFFF tÕi G%s#c00FFFF b¸ 1 ğám ti¬u tØ qu¤y g¥y liên tøc và không còn bi®n pháp nào khác, chï còn l¤y bäo v§t %s#c00FFFF ğã c¤t gi¤u lâu nay, gào lên 1 tiªng \"Oan!\", trên tr¶i b±ng xu¤t hi®n 1 lu°ng tuyªt Nga mao r¾t xu¯ng, lû ti¬u tØ kinh sş quá bö chÕy."}
x331026_g_itemList[30509032] = {effect=5, time=60,
	msg1="#W#{_INFOUSR%s}#c00FFFF vì gia tång không khí cüa sñ lãng mÕng v¾i ngß¶i yêu cüa mình tÕi Hoa ti«n nguy®t hÕ, sØ døng %s#c00FFFF v§t ph¦m này không d­ có ğßşc này ",
	msg2="#W#{_INFOUSR%s}#c00FFFF vì gia tång không khí cüa sñ lãng mÕng v¾i ngß¶i yêu cüa mình tÕi #G%s#c00FFFF, sØ døng %s#c00FFFF v§t ph¦m này không d­ có ğßşc này "}
x331026_g_itemList[30509033] = {effect=6, time=60,
	msg1="#W#{_INFOUSR%s}#c00FFFF ğang cùng cao thü võ lâm tÖ võ %s#c00FFFF, khi th¤y trúc di®p bay ğ¥y tr¶i, ngay l§p tÑc tr· nên khí thª h½n ngß¶i.",
	msg2="#W#{_INFOUSR%s}#c00FFFF ğang cùng cao thü võ lâm · #G%s#c00FFFFtÖ võ, sØ døng trß¾c 1 %s#c00FFFF, khi th¤y trúc di®p bay ğ¥y tr¶i, ngay l§p tÑc tr· nên khí thª h½n ngß¶i."}
x331026_g_itemList[30509034] = {effect=7, time=60,
	msg1="#W#{_INFOUSR%s}#c00FFFF trong lúc ğang ği dÕo, ngçu hÑng làm th½, sØ døng 1 %s#c00FFFF, m¡t nhìn phong di®p bay ğ¥y tr¶i, buµc mi®ng ngâm ra câu \"Sß½ng di®p h°ng vu nh¸ nguy®t hoa\", làm ngß¶i ği ğß¶ng r¤t ¤n tßşng.",
	msg2="#W#{_INFOUSR%s}#c00FFFF ·#G%s#c00FFFF trong lúc ğang ği dÕo, ngçu hÑng làm th½, sØ døng 1 %s#c00FFFF, m¡t nhìn phong di®p bay ğ¥y tr¶i, buµc mi®ng ngâm ra câu \"Sß½ng di®p h°ng vu nh¸ nguy®t hoa\", làm ngß¶i ği ğß¶ng r¤t ¤n tßşng."}
x331026_g_itemList[30509035] = {effect=8, time=60,
	msg1="#W#{_INFOUSR%s}#c00FFFF ğ«u b¸ m÷i ngß¶i chê khuôn m£t cüa mình, trong lòng không cam tâm, trong lúc gi§n dæ ğã sØ døng 1 %s#c00FFFF, sau ğó t× trong b¥u tr¶i ğ¥y cát bøi ği ra, r¤t hài lòng v¾i sñ thay ğ±i cüa bän thân.",
	msg2="#W#{_INFOUSR%s}#c00FFFF ğ«u b¸ m÷i ngß¶i chê khuôn m£t cüa mình, trong lòng không cam tâm, ğã · #G%s#c00FFFF sØ døng 1 %s#c00FFFF, sau ğó t× trong b¥u tr¶i ğ¥y cát bøi ği ra, r¤t hài lòng v¾i sñ thay ğ±i cüa bän thân."}
x331026_g_itemList[30509036] = {effect=9, time=60,
	msg1="#W#{_INFOUSR%s}#c00FFFF n¢m m½ cûng mu¯n phát tài, cho nên sØ døng 1 %s#c00FFFF, ngay l§p tÑc nguyên bäo r½i nhß mßa, m÷i ngß¶i vui m×ng hoan hô.",
	msg2="#W#{_INFOUSR%s}#c00FFFF n¢m m½ cûng mu¯n phát tài, nên · #G%s#c00FFFF sØ døng 1 %s#c00FFFF, ngay l§p tÑc nguyên bäo r½i nhß mßa, m÷i ngß¶i vui m×ng hoan hô."}
x331026_g_itemList[30509052] = {effect=10, time=60,
	msg1="#HTháng nåm, mµt h°i lôi minh sau mßa to tiªn ğªn, bay v« phía nam chim nhÕn trèo non lµi su¯i tr· v« nhà; TÕi ğây mùa rñc rŞ #W#{_INFOUSR%s}#H sØ døng mµt cái #W%s#H, tÕ l¤y ca ngşi này ğông mÕch dß½ng tu® nông dân huy hãn hà s×, v¤t vä c¥n cù cày c¤y häo quang cänh.",
	msg2="#HLao ğµng là th¥n kÏ , lao ğµng là vî ğÕi . Ngß¶i lao ğµng dùng c¥n lao  hai tay cùng trí tu®, b®n  này nhi«u màu ban lan  thª gi¾i, sáng tÕo  nhân loÕi  vån minh.#W#{_INFOUSR%s}#H tÕi ğây cái ğ£c bi®t  trong cuµc s¯ng, · #G%s#H sØ døng  mµt cái #W%s#H hß¾ng toàn thª gi¾i  ngß¶i lao ğµng chào!"}
x331026_g_itemList[30509066] = {effect=20, time=60,
	msg1="#HĞêm th¤t t¸ch buông xu¯ng,#W#{_INFOUSR%s}#H ğêm qua mµng ngßu lang chÑc næ c¥u hï thß¾c g£p gŞ, hâm mµ vô cùng, vì thª sØ døng  mµt cái #W%s#H, l¤y này hß¾ng s· hæu ğµc thân  m÷i ngß¶i tän yêu  tín hi®u!",
	msg2="#HĞêm th¤t t¸ch, c¥u hï thß¾c, ngân hà, ngßu lang chÑc næ......#W#{_INFOUSR%s}#H tÕi ğây cái ğ£c bi®t  trong cuµc s¯ng, ğµt nhiên lòng có s· cäm, hß¾ng #G%s#H  thiên không ném ği mµt phen #W%s#H, nh¤t th¶i hoa vû bay tán loÕn."}
x331026_g_itemList[30509071] = {effect=21, time=60,
	msg1="#{AOYYH_8804_01}#W#{_INFOUSR%s}#H tình cäm mãnh li®t dâng trào #{AOYYH_8804_03}%s#{AOYYH_8804_04}",
	msg2="#{AOYYH_8804_01}#W#{_INFOUSR%s}#H tình cäm mãnh li®t dâng trào tÕi #G%s#{AOYYH_8804_03}%s#{AOYYH_8804_04}"}
x331026_g_itemList[30509083] = {effect=22, time=60,
	msg1="#HKhi t¾i sinh nh§t bÕn thân, #W#{_INFOUSR%s}#H m×ng r· không tñ kìm hãm ğßşc, vì thª sØ døng mµt cái #W%s#H, bi¬u ğÕt chúc phúc chân thành tha thiªt ğ¯i v¾i sinh nh§t b¢ng hæu!",
	msg2="#W#{_INFOUSR%s}#H — sinh nh§t bÕn tri kï, cho #G%s#H châm ngòi  mµt cái #W%s#H, nói: Nguy®n s· hæu khoái hoÕt, hÕnh phúc, ¤m áp, v§n may s¨ ğªn v¾i ngß½i, sinh nh§t vui vë!"}
--**********************************
--ÊÂ¼ş½»»¥Èë¿Ú
--**********************************
function x331026_OnDefaultEvent( sceneId, selfId, bagIndex )
-- ²»C¥n Cái này ½Ó¿Ú,µ«Òª±£Áô¿Õº¯Êı
end

--**********************************
--Cái này ÎïÆ·toÕ ğµ Ê¹ÓÃ¹ı³ÌĞúng·ñÀàËÆÓÚ¼¼ÄÜ: 
--H® th¯ng»áTÕi Ö´ĞĞ¿ªÊ¼Ê±¼ì²âCái này º¯ÊıtoÕ ğµ Tr· v«Öµ,Èç¹ûTr· v«th¤t bÕiÔòºöÂÔºóÃætoÕ ğµ ÀàËÆ¼¼ÄÜtoÕ ğµ Ö´ĞĞ.
--Tr· v«1: ¼¼ÄÜÀàËÆtoÕ ğµ ÎïÆ·,¿ÉÒÔ¼ÌĞøÀàËÆ¼¼ÄÜtoÕ ğµ Ö´ĞĞ£»Tr· v«0: ºöÂÔºóÃætoÕ ğµ ²Ù×÷.
--**********************************
function x331026_IsSkillLikeScript( sceneId, selfId)
	return 1; --Cái này ½Å±¾C¥n ¶¯×÷Ö§³Ö
end

--**********************************
--Ö±½ÓHuÖ böĞ§¹û: 
--H® th¯ng»áÖ±½Óµ÷ÓÃCái này ½Ó¿Ú,²¢¸ù¾İCái này º¯ÊıtoÕ ğµ Tr· v«ÖµXác nh§nÒÔºótoÕ ğµ Á÷³ÌĞúng·ñÖ´ĞĞ.
--Tr· v«1: ÒÑ¾­HuÖ bö¶ÔÓ¦Ğ§¹û,²»ÔÙÖ´ĞĞºóĞø²Ù×÷£»Tr· v«0: Ã»ÓĞ¼ì²âµ½Ïà¹ØĞ§¹û,¼ÌĞøÖ´ĞĞ.
--**********************************
function x331026_CancelImpacts( sceneId, selfId )
	return 0; --²»C¥n Cái này ½Ó¿Ú,µ«Òª±£Áô¿Õº¯Êı,²¢ÇÒÊ¼ÖÕTr· v«0.
end

--**********************************
--Ìõ¼ş¼ì²âÈë¿Ú: 
--H® th¯ng»áTÕi ¼¼ÄÜ¼ì²âtoÕ ğµ Ê±¼ä ği¬mµ÷ÓÃCái này ½Ó¿Ú,²¢¸ù¾İCái này º¯ÊıtoÕ ğµ Tr· v«ÖµXác nh§nÒÔºótoÕ ğµ Á÷³ÌĞúng·ñÖ´ĞĞ.
--Tr· v«1: Ìõ¼ş¼ì²âÍ¨¹ı,¿ÉÒÔ¼ÌĞøÖ´ĞĞ£»Tr· v«0: Ìõ¼ş¼ì²âth¤t bÕi,ÖĞ¶ÏºóĞøÖ´ĞĞ.
--**********************************
function x331026_OnConditionCheck( sceneId, selfId )
	--Ğ£ÑéÊ¹ÓÃtoÕ ğµ ÎïÆ·
	if(1~=LuaFnVerifyUsedItem(sceneId, selfId)) then
		return 0
	end
	
	local itemTblIndex = LuaFnGetItemIndexOfUsedItem( sceneId, selfId );
	local curItem = x331026_g_itemList[itemTblIndex];
	if not curItem then
		x331026_NotifyFailTips(sceneId, selfId, "Chßa m· ğÕo cø, không th¬ sØ døng.");
		return 0;
	end
	
	local curWeather = LuaFnGetSceneWeather(sceneId);
	if not curWeather or curWeather ~= -1 then
		x331026_NotifyFailTips(sceneId, selfId, "Trong không khí ğ£c thù không th¬ sØ døng v§t ph¦m này.");
		return 0;
	end

	return 1; --²»C¥n ÈÎºÎÌõ¼ş,²¢ÇÒÊ¼ÖÕTr· v«1.
end

--**********************************
--ÏûºÄ¼ì²â¼°´¦ÀíÈë¿Ú: 
--H® th¯ng»áTÕi ¼¼ÄÜÏûºÄtoÕ ğµ Ê±¼ä ği¬mµ÷ÓÃCái này ½Ó¿Ú,²¢¸ù¾İCái này º¯ÊıtoÕ ğµ Tr· v«ÖµXác nh§nÒÔºótoÕ ğµ Á÷³ÌĞúng·ñÖ´ĞĞ.
--Tr· v«1: ÏûºÄ´¦ÀíÍ¨¹ı,¿ÉÒÔ¼ÌĞøÖ´ĞĞ£»Tr· v«0: ÏûºÄ¼ì²âth¤t bÕi,ÖĞ¶ÏºóĞøÖ´ĞĞ.
--×¢Òâ: Õâ²»¹â¸ºÔğÏûºÄtoÕ ğµ ¼ì²âÒ²¸ºÔğÏûºÄtoÕ ğµ Ö´ĞĞ.
--**********************************
function x331026_OnDeplete( sceneId, selfId )
	
	local itemTblIndex = LuaFnGetItemIndexOfUsedItem( sceneId, selfId );
	local curItem = x331026_g_itemList[itemTblIndex];
	if not curItem then
		x331026_NotifyFailTips(sceneId, selfId, "Chßa m· ğÕo cø, không th¬ sØ døng.");
		return 0;
	end
	
	local itemBagIndex = LuaFnGetBagIndexOfUsedItem(sceneId, selfId);
	local szTransferItem = GetBagItemTransfer(sceneId, selfId, itemBagIndex);
	local selfName = GetName(sceneId, selfId);
	
	if(0<LuaFnDepletingUsedItem(sceneId, selfId)) then
		if szTransferItem and selfName then
			local sceneType = LuaFnGetSceneType(sceneId);
			local strMsg;
			if sceneType and sceneType == 0 then
				local sceneName = GetSceneName(sceneId);
				strMsg = format(curItem.msg2, selfName, sceneName, "#{_INFOMSG"..szTransferItem.."}");
			else
				strMsg = format(curItem.msg1, selfName, "#{_INFOMSG"..szTransferItem.."}");
			end
			BroadMsgByChatPipe(sceneId, selfId, strMsg, 4);
		end
		return 1;
	end
	return 0;
end

--**********************************
--Ö»»áÖ´ĞĞmµt ´ÎÈë¿Ú: 
--¾ÛÆøºÍË²·¢¼¼ÄÜ»áTÕi ÏûºÄÍê³Éºóµ÷ÓÃCái này ½Ó¿Ú(¾ÛÆø½áÊø²¢ÇÒ¸÷ÖÖÌõ¼ş¶¼Thöa mãntoÕ ğµ Ê±ºò),¶øÒıµ¼
--¼¼ÄÜÒ²»áTÕi ÏûºÄÍê³Éºóµ÷ÓÃCái này ½Ó¿Ú(¼¼ÄÜtoÕ ğµ mµt ¿ªÊ¼,ÏûºÄ³É¹¦Ö´ĞĞÖ®ºó).
--Tr· v«1: ´¦Àí³É¹¦£»Tr· v«0: ´¦Àíth¤t bÕi.
--×¢: ÕâÀïĞúng¼¼ÄÜÉúĞ§mµt ´ÎtoÕ ğµ Èë¿Ú
--**********************************
function x331026_OnActivateOnce( sceneId, selfId )
	
	local itemTblIndex = LuaFnGetItemIndexOfUsedItem( sceneId, selfId );
	local curItem = x331026_g_itemList[itemTblIndex];
	if not curItem then
		x331026_NotifyFailTips(sceneId, selfId, "Chßa m· ğÕo cø, không th¬ sØ døng.");
		return 0;
	end
	
	LuaFnSetSceneWeather(sceneId, curItem.effect, curItem.time * 1000 );
	return 1;
end

--**********************************
--Òıµ¼ĞÄÌø´¦ÀíÈë¿Ú: 
--Òıµ¼¼¼ÄÜ»áTÕi Ã¿´ÎĞÄÌø½áÊøÊ±µ÷ÓÃCái này ½Ó¿Ú.
--Tr· v«: 1¼ÌĞøÏÂ´ÎĞÄÌø£»0: ÖĞ¶ÏÒıµ¼.
--×¢: ÕâÀïĞúng¼¼ÄÜÉúĞ§mµt ´ÎtoÕ ğµ Èë¿Ú
--**********************************
function x331026_OnActivateEachTick( sceneId, selfId)
	return 1; --²»ĞúngÒıµ¼ĞÔ½Å±¾, Ö»±£Áô¿Õº¯Êı.
end

--**********************************
-- ĞÑÄ¿th¤t bÕiÌáÊ¾
--**********************************
function x331026_NotifyFailTips( sceneId, selfId, Tip )
	BeginEvent( sceneId )
		AddText( sceneId, Tip )
	EndEvent( sceneId )
	DispatchMissionTips( sceneId, selfId )
end
